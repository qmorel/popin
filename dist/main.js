!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){var o=n(1),i=n(2),s=null;function a(e){return setTimeout(e,0)}e.exports=function(e,t){var n=document,r="string"==typeof e?n.querySelector(e):e,c=i({returnFocusOnDeactivate:!0,escapeDeactivates:!0},t),p={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},l={activate:function(e){if(!p.active){O(),p.active=!0,p.paused=!1,p.nodeFocusedBeforeActivation=n.activeElement;var t=e&&e.onActivate?e.onActivate:c.onActivate;return t&&t(),d(),l}},deactivate:u,pause:function(){!p.paused&&p.active&&(p.paused=!0,h())},unpause:function(){p.paused&&p.active&&(p.paused=!1,d())}};return l;function u(e){if(p.active){h(),p.active=!1,p.paused=!1;var t=e&&void 0!==e.onDeactivate?e.onDeactivate:c.onDeactivate;return t&&t(),(e&&void 0!==e.returnFocus?e.returnFocus:c.returnFocusOnDeactivate)&&a(function(){g(p.nodeFocusedBeforeActivation)}),l}}function d(){if(p.active)return s&&s.pause(),s=l,O(),a(function(){g(v())}),n.addEventListener("focusin",b,!0),n.addEventListener("mousedown",m,!0),n.addEventListener("touchstart",m,!0),n.addEventListener("click",E,!0),n.addEventListener("keydown",y,!0),l}function h(){if(p.active&&s===l)return n.removeEventListener("focusin",b,!0),n.removeEventListener("mousedown",m,!0),n.removeEventListener("touchstart",m,!0),n.removeEventListener("click",E,!0),n.removeEventListener("keydown",y,!0),s=null,l}function f(e){var t=c[e],o=t;if(!t)return null;if("string"==typeof t&&!(o=n.querySelector(t)))throw new Error("`"+e+"` refers to no known node");if("function"==typeof t&&!(o=t()))throw new Error("`"+e+"` did not return a node");return o}function v(){var e;if(!(e=null!==f("initialFocus")?f("initialFocus"):r.contains(n.activeElement)?n.activeElement:p.firstTabbableNode||f("fallbackFocus")))throw new Error("You can't have a focus-trap without at least one focusable element");return e}function m(e){r.contains(e.target)||(c.clickOutsideDeactivates?u({returnFocus:!o.isFocusable(e.target)}):e.preventDefault())}function b(e){r.contains(e.target)||e.target instanceof Document||(e.stopImmediatePropagation(),g(p.mostRecentlyFocusedNode||v()))}function y(e){if(!1!==c.escapeDeactivates&&function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e))return e.preventDefault(),void u();(function(e){return"Tab"===e.key||9===e.keyCode})(e)&&function(e){if(O(),e.shiftKey&&e.target===p.firstTabbableNode)return e.preventDefault(),void g(p.lastTabbableNode);e.shiftKey||e.target!==p.lastTabbableNode||(e.preventDefault(),g(p.firstTabbableNode))}(e)}function E(e){c.clickOutsideDeactivates||r.contains(e.target)||(e.preventDefault(),e.stopImmediatePropagation())}function O(){var e=o(r);p.firstTabbableNode=e[0]||v(),p.lastTabbableNode=e[e.length-1]||v()}function g(e){e!==n.activeElement&&(e&&e.focus?(e.focus(),p.mostRecentlyFocusedNode=e,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(e)&&e.select()):g(v()))}}},function(e,t){var n=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],o=n.join(","),i="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function s(e,t){t=t||{};var n,s,r,c=[],u=[],h=new d(e.ownerDocument||e),f=e.querySelectorAll(o);for(t.includeContainer&&i.call(e,o)&&(f=Array.prototype.slice.apply(f)).unshift(e),n=0;n<f.length;n++)a(s=f[n],h)&&(0===(r=p(s))?c.push(s):u.push({documentOrder:n,tabIndex:r,node:s}));return u.sort(l).map(function(e){return e.node}).concat(c)}function a(e,t){return!(!r(e,t)||function(e){return function(e){return u(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t=function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return e[t]}(e.ownerDocument.querySelectorAll('input[type="radio"][name="'+e.name+'"]'));return!t||t===e}(e)}(e)||p(e)<0)}function r(e,t){return t=t||new d(e.ownerDocument||e),!(e.disabled||function(e){return u(e)&&"hidden"===e.type}(e)||t.isUntouchable(e))}s.isTabbable=function(e,t){if(!e)throw new Error("No node provided");return!1!==i.call(e,o)&&a(e,t)},s.isFocusable=function(e,t){if(!e)throw new Error("No node provided");return!1!==i.call(e,c)&&r(e,t)};var c=n.concat("iframe").join(",");function p(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:e.tabIndex:t}function l(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex}function u(e){return"INPUT"===e.tagName}function d(e){this.doc=e,this.cache=[]}d.prototype.hasDisplayNone=function(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var n=function(e,t){for(var n=0,o=e.length;n<o;n++)if(t(e[n]))return e[n]}(this.cache,function(t){return t===e});if(n)return n[1];var o=!1;return"none"===(t=t||this.doc.defaultView.getComputedStyle(e)).display?o=!0:e.parentNode&&(o=this.hasDisplayNone(e.parentNode)),this.cache.push([e,o]),o},d.prototype.isUntouchable=function(e){if(e===this.doc.documentElement)return!1;var t=this.doc.defaultView.getComputedStyle(e);return!!this.hasDisplayNone(e,t)||"hidden"===t.visibility},e.exports=s},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var o=arguments[t];for(var i in o)n.call(o,i)&&(e[i]=o[i])}return e};var n=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o);const s={PopinId:"data-popin",PopinBtnOpen:"data-popin-open",PopinBtnClose:"data-popin-close",PopinLoadUrl:"data-popin-load"},a={popin:".js-popin",btnOpen:".js-popin-open",btnClose:".js-popin-close",popinMain:".js-popin-main",popinContent:".js-popin-content"},r={PopinOpen:"is-enabled",PopinLoading:"is-loading",BodyClassOpen:"has-popinOpen",BodyClass:"has-popinOpen"};class c{constructor(e,t={}){this.options={trapFocus:!0,clickOutside:!0,opened:!1,load:void 0,loadType:"text",loadSelector:void 0,loadError:"Une erreur est survenue lors du chargement du contenu.",thenOpen:void 0,...t,selectors:{...a,...t.selectors},classes:{...r,...t.classes}},this._body=document.querySelector("body"),this._element=e||document.querySelector(this.options.selectors.popin),this.popinId=this._element.dataset.popin,this.contentPopin=this._element.querySelector(`${this.options.selectors.popinContent}`),this.openBtns=document.querySelectorAll(`${this.options.selectors.btnOpen}[${s.PopinBtnOpen}="${this.popinId}"]`),this.closeBtns=document.querySelectorAll(`${this.options.selectors.btnClose}[${s.PopinBtnClose}="${this.popinId}"]`),void 0!==this._element.dataset.popinLoad&&(this.options.load=this._element.dataset.popinLoad),document.addEventListener(`open-${this.popinId}`,e=>{e.detail&&e.detail.thenOpen&&(this.options.thenOpen=e.detail.thenOpen),e.detail&&e.detail.callback&&(this.options.callback=e.detail.callback),this.open()}),document.addEventListener(`close-${this.popinId}`,()=>{this.close()}),this._element.addEventListener("keydown",e=>{"Escape"===e.key&&this.close()}),[...this.openBtns].map(e=>e.addEventListener("click",e=>this.handleOpenBtn(e))),[...this.closeBtns].map(e=>e.addEventListener("click",e=>this.handleCloseBtn(e))),this.options.opened&&this.open()}handleOpenBtn(e){e.preventDefault(),this.open(e.target)}handleCloseBtn(e){e.preventDefault(),this.close()}open(e){this._element.classList.add(this.options.classes.PopinOpen),this._element.setAttribute("aria-hidden",!1),this.options.clickOutside&&this._element.addEventListener("click",t=>{const{target:n}=t;n.closest(this.options.selectors.popinMain)||n.isEqualNode(e)||this.close()},!1),this.options.trapFocus&&(this.trapFocus=i()(this._element),this.trapFocus.activate(),this._element.focus()),void 0!==this.options.load&&""!==this.options.load?this.loadContent(this.options.load):void 0!==this.options.callback&&this.options.callback();const t=new CustomEvent("popin-open",{detail:{popinId:this.popinId}});this._element.dispatchEvent(t),this._body.classList.add(this.options.classes.BodyClassOpen)}close(){if(this.options.trapFocus&&this.trapFocus.deactivate(),this._element.classList.remove(this.options.classes.PopinOpen),this._element.setAttribute("aria-hidden",!0),this.options.thenOpen){const e=new CustomEvent(`open-${this.options.thenOpen}`);document.dispatchEvent(e)}const e=new CustomEvent("popin-close",{detail:{popinId:this.popinId}});this._element.dispatchEvent(e)}loadContent(e){this.contentPopin.innerHTML="",this.contentPopin.classList.add(this.options.classes.PopinLoading),fetch(e).then(e=>{this.contentPopin.classList.remove(this.options.classes.PopinLoading),"json"===this.options.loadType?e.json().then(e=>{e=this.options.loadSelector?e[this.options.loadSelector]:e[0],this.contentPopin.insertAdjacentHTML("afterbegin",e),void 0!==this.options.callback&&this.options.callback()}):e.text().then(e=>{if(this.options.loadSelector){const t=document.createElement("div");t.innerHTML=e,e=t.querySelector(this.options.loadSelector).outerHTML}this.contentPopin.insertAdjacentHTML("afterbegin",e),void 0!==this.options.callback&&this.options.callback()})}).catch(()=>{this.contentPopin.innerHTML=this.options.loadError})}}document.querySelectorAll(".js-popin").forEach(e=>{e.popin=new c(e)}),document.querySelectorAll(".js-popin-opened").forEach(e=>{e.popin=new c(e,{opened:!0,thenOpen:"popin-load"})}),document.querySelectorAll(".js-popin-custom").forEach(e=>{e.popin=new c(e,{selectors:{btnOpen:".js-popin-custom-open",btnClose:".js-popin-custom-close",popinMain:".js-popin-custom-main",popinContent:".js-popin-custom-content"}})}),document.querySelectorAll(".js-popin-load").forEach(e=>{e.popin=new c(e,{load:"https://jsonplaceholder.typicode.com/posts/1",loadType:"json",loadSelector:"body"})})}]);