!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){var o=n(1),i=n(2),r=null;function a(e){return setTimeout(e,0)}e.exports=function(e,t){var n=document,s="string"==typeof e?n.querySelector(e):e,c=i({returnFocusOnDeactivate:!0,escapeDeactivates:!0},t),l={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},u={activate:function(e){if(!l.active){g(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=n.activeElement;var t=e&&e.onActivate?e.onActivate:c.onActivate;return t&&t(),d(),u}},deactivate:p,pause:function(){!l.paused&&l.active&&(l.paused=!0,f())},unpause:function(){l.paused&&l.active&&(l.paused=!1,d())}};return u;function p(e){if(l.active){f(),l.active=!1,l.paused=!1;var t=e&&void 0!==e.onDeactivate?e.onDeactivate:c.onDeactivate;return t&&t(),(e&&void 0!==e.returnFocus?e.returnFocus:c.returnFocusOnDeactivate)&&a(function(){L(l.nodeFocusedBeforeActivation)}),u}}function d(){if(l.active)return r&&r.pause(),r=u,g(),a(function(){L(v())}),n.addEventListener("focusin",m,!0),n.addEventListener("mousedown",b,!0),n.addEventListener("touchstart",b,!0),n.addEventListener("click",E,!0),n.addEventListener("keydown",y,!0),u}function f(){if(l.active&&r===u)return n.removeEventListener("focusin",m,!0),n.removeEventListener("mousedown",b,!0),n.removeEventListener("touchstart",b,!0),n.removeEventListener("click",E,!0),n.removeEventListener("keydown",y,!0),r=null,u}function h(e){var t=c[e],o=t;if(!t)return null;if("string"==typeof t&&!(o=n.querySelector(t)))throw new Error("`"+e+"` refers to no known node");if("function"==typeof t&&!(o=t()))throw new Error("`"+e+"` did not return a node");return o}function v(){var e;if(!(e=null!==h("initialFocus")?h("initialFocus"):s.contains(n.activeElement)?n.activeElement:l.firstTabbableNode||h("fallbackFocus")))throw new Error("You can't have a focus-trap without at least one focusable element");return e}function b(e){s.contains(e.target)||(c.clickOutsideDeactivates?p({returnFocus:!o.isFocusable(e.target)}):e.preventDefault())}function m(e){s.contains(e.target)||e.target instanceof Document||(e.stopImmediatePropagation(),L(l.mostRecentlyFocusedNode||v()))}function y(e){if(!1!==c.escapeDeactivates&&function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e))return e.preventDefault(),void p();(function(e){return"Tab"===e.key||9===e.keyCode})(e)&&function(e){if(g(),e.shiftKey&&e.target===l.firstTabbableNode)return e.preventDefault(),void L(l.lastTabbableNode);e.shiftKey||e.target!==l.lastTabbableNode||(e.preventDefault(),L(l.firstTabbableNode))}(e)}function E(e){c.clickOutsideDeactivates||s.contains(e.target)||(e.preventDefault(),e.stopImmediatePropagation())}function g(){var e=o(s);l.firstTabbableNode=e[0]||v(),l.lastTabbableNode=e[e.length-1]||v()}function L(e){e!==n.activeElement&&(e&&e.focus?(e.focus(),l.mostRecentlyFocusedNode=e,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(e)&&e.select()):L(v()))}}},function(e,t){var n=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],o=n.join(","),i="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function r(e,t){t=t||{};var n,r,s,c=[],p=[],f=new d(e.ownerDocument||e),h=e.querySelectorAll(o);for(t.includeContainer&&i.call(e,o)&&(h=Array.prototype.slice.apply(h)).unshift(e),n=0;n<h.length;n++)a(r=h[n],f)&&(0===(s=l(r))?c.push(r):p.push({documentOrder:n,tabIndex:s,node:r}));return p.sort(u).map(function(e){return e.node}).concat(c)}function a(e,t){return!(!s(e,t)||function(e){return function(e){return p(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t=function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return e[t]}(e.ownerDocument.querySelectorAll('input[type="radio"][name="'+e.name+'"]'));return!t||t===e}(e)}(e)||l(e)<0)}function s(e,t){return t=t||new d(e.ownerDocument||e),!(e.disabled||function(e){return p(e)&&"hidden"===e.type}(e)||t.isUntouchable(e))}r.isTabbable=function(e,t){if(!e)throw new Error("No node provided");return!1!==i.call(e,o)&&a(e,t)},r.isFocusable=function(e,t){if(!e)throw new Error("No node provided");return!1!==i.call(e,c)&&s(e,t)};var c=n.concat("iframe").join(",");function l(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:e.tabIndex:t}function u(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex}function p(e){return"INPUT"===e.tagName}function d(e){this.doc=e,this.cache=[]}d.prototype.hasDisplayNone=function(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var n=function(e,t){for(var n=0,o=e.length;n<o;n++)if(t(e[n]))return e[n]}(this.cache,function(t){return t===e});if(n)return n[1];var o=!1;return"none"===(t=t||this.doc.defaultView.getComputedStyle(e)).display?o=!0:e.parentNode&&(o=this.hasDisplayNone(e.parentNode)),this.cache.push([e,o]),o},d.prototype.isUntouchable=function(e){if(e===this.doc.documentElement)return!1;var t=this.doc.defaultView.getComputedStyle(e);return!!this.hasDisplayNone(e,t)||"hidden"===t.visibility},e.exports=r},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var o=arguments[t];for(var i in o)n.call(o,i)&&(e[i]=o[i])}return e};var n=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o);const r={PopinId:"data-popin",PopinBtnOpen:"data-popin-open",PopinBtnClose:"data-popin-close",PopinLoadUrl:"data-popin-load"},a={popin:".js-popin",btnOpen:".js-popin-open",btnClose:".js-popin-close",popinMain:".js-popin-main",popinContent:".js-popin-content"},s={PopinOpen:"is-enabled",PopinLoading:"is-loading"};class c{constructor(e,t={}){this.options={trapFocus:!0,clickOutside:!0,load:void 0,loadType:"text",loadSelector:void 0,loadError:"Une erreur est survenue lors du chargement du contenu.",thenOpen:void 0,...t,selectors:{...a,...t.selectors}},this._element=e||document.querySelector(this.options.selectors.popin),this.popinId=this._element.dataset.popin,this.contentPopin=this._element.querySelector(`${this.options.selectors.popinContent}`),this.openBtns=document.querySelectorAll(`${this.options.selectors.btnOpen}[${r.PopinBtnOpen}="${this.popinId}"]`),this.closeBtns=document.querySelectorAll(`${this.options.selectors.btnClose}[${r.PopinBtnClose}="${this.popinId}"]`),void 0!==this._element.dataset.popinLoad&&(this.options.load=this._element.dataset.popinLoad),document.addEventListener(`open-${this.popinId}`,e=>{e.detail&&e.detail.thenOpen&&(this.options.thenOpen=e.detail.thenOpen),e.detail&&e.detail.callback&&(this.options.callback=e.detail.callback),this.open()}),document.addEventListener(`close-${this.popinId}`,()=>{this.close()}),this.init()}init(){this._element.addEventListener("keydown",e=>{"Escape"===e.key&&this.close()}),[...this.openBtns].map(e=>e.addEventListener("click",e=>this.handleOpenBtn(e))),[...this.closeBtns].map(e=>e.addEventListener("click",e=>this.handleCloseBtn(e)))}handleOpenBtn(e){e.preventDefault(),this.open(e.target)}handleCloseBtn(e){e.preventDefault(),this.close()}open(e){this._element.classList.add(s.PopinOpen),this._element.setAttribute("aria-hidden",!1),this.options.clickOutside&&this._element.addEventListener("click",t=>{const{target:n}=t;n.closest(this.options.selectors.popinMain)||n.isEqualNode(e)||this.close()},!1),this.options.trapFocus&&(this.trapFocus=i()(this._element),this.trapFocus.activate(),this._element.focus()),void 0!==this.options.load&&""!==this.options.load?this.loadContent(this.options.load):void 0!==this.options.callback&&this.options.callback();const t=CustomEvent("popin-open",{detail:{popinId:this.popinId}});this._element.dispatchEvent(t)}close(){if(this.options.trapFocus&&this.trapFocus.deactivate(),this._element.classList.remove(s.PopinOpen),this._element.setAttribute("aria-hidden",!0),this.options.thenOpen){const e=new CustomEvent(`open-${this.options.thenOpen}`);document.dispatchEvent(e)}const e=CustomEvent("popin-close",{detail:{popinId:this.popinId}});this._element.dispatchEvent(e)}loadContent(e,t="text"){this.contentPopin.innerHTML="",this.contentPopin.classList.add(s.PopinLoading),fetch(e).then(e=>{this.contentPopin.classList.remove(s.PopinLoading),"json"===t?e.json().then(e=>{e=this.options.loadSelector?e[this.options.loadSelector]:e[0],this.contentPopin.insertAdjacentHTML("afterbegin",e),void 0!==this.options.callback&&this.options.callback()}):e.text().then(e=>{if(this.options.loadSelector){const t=document.createElement("div");t.innerHTML=e,e=t.querySelector(this.options.loadSelector).outerHTML}this.contentPopin.insertAdjacentHTML("afterbegin",e),void 0!==this.options.callback&&this.options.callback()})}).catch(()=>{this.contentPopin.innerHTML=this.options.loadError})}}console.log("sqdsds"),document.querySelectorAll(".js-popin").forEach(e=>{e.popin=new c(e,{load:"/login",loadSelector:"#login-form",callback:(void 0).loginCallback})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZvY3VzLXRyYXAvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RhYmJhYmxlL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy94dGVuZC9pbW11dGFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BvcGluLmpzIiwid2VicGFjazovLy8uL3Rlc3QvYXBwLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidGFiYmFibGUiLCJ4dGVuZCIsImxpc3RlbmluZ0ZvY3VzVHJhcCIsImRlbGF5IiwiZm4iLCJzZXRUaW1lb3V0IiwiZWxlbWVudCIsInVzZXJPcHRpb25zIiwiZG9jIiwiZG9jdW1lbnQiLCJjb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiY29uZmlnIiwicmV0dXJuRm9jdXNPbkRlYWN0aXZhdGUiLCJlc2NhcGVEZWFjdGl2YXRlcyIsInN0YXRlIiwiZmlyc3RUYWJiYWJsZU5vZGUiLCJsYXN0VGFiYmFibGVOb2RlIiwibm9kZUZvY3VzZWRCZWZvcmVBY3RpdmF0aW9uIiwibW9zdFJlY2VudGx5Rm9jdXNlZE5vZGUiLCJhY3RpdmUiLCJwYXVzZWQiLCJ0cmFwIiwiYWN0aXZhdGUiLCJhY3RpdmF0ZU9wdGlvbnMiLCJ1cGRhdGVUYWJiYWJsZU5vZGVzIiwiYWN0aXZlRWxlbWVudCIsIm9uQWN0aXZhdGUiLCJhZGRMaXN0ZW5lcnMiLCJkZWFjdGl2YXRlIiwicGF1c2UiLCJyZW1vdmVMaXN0ZW5lcnMiLCJ1bnBhdXNlIiwiZGVhY3RpdmF0ZU9wdGlvbnMiLCJvbkRlYWN0aXZhdGUiLCJ1bmRlZmluZWQiLCJyZXR1cm5Gb2N1cyIsInRyeUZvY3VzIiwiZ2V0SW5pdGlhbEZvY3VzTm9kZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGVja0ZvY3VzSW4iLCJjaGVja1BvaW50ZXJEb3duIiwiY2hlY2tDbGljayIsImNoZWNrS2V5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldE5vZGVGb3JPcHRpb24iLCJvcHRpb25OYW1lIiwib3B0aW9uVmFsdWUiLCJub2RlIiwiRXJyb3IiLCJjb250YWlucyIsImUiLCJ0YXJnZXQiLCJjbGlja091dHNpZGVEZWFjdGl2YXRlcyIsImlzRm9jdXNhYmxlIiwicHJldmVudERlZmF1bHQiLCJEb2N1bWVudCIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImtleUNvZGUiLCJpc0VzY2FwZUV2ZW50IiwiaXNUYWJFdmVudCIsInNoaWZ0S2V5IiwiY2hlY2tUYWIiLCJ0YWJiYWJsZU5vZGVzIiwibGVuZ3RoIiwiZm9jdXMiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJzZWxlY3QiLCJpc1NlbGVjdGFibGVJbnB1dCIsImNhbmRpZGF0ZVNlbGVjdG9ycyIsImNhbmRpZGF0ZVNlbGVjdG9yIiwiam9pbiIsIm1hdGNoZXMiLCJFbGVtZW50IiwibXNNYXRjaGVzU2VsZWN0b3IiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiLCJlbCIsIm9wdGlvbnMiLCJjYW5kaWRhdGUiLCJjYW5kaWRhdGVUYWJpbmRleCIsInJlZ3VsYXJUYWJiYWJsZXMiLCJvcmRlcmVkVGFiYmFibGVzIiwidW50b3VjaGFiaWxpdHlDaGVja2VyIiwiVW50b3VjaGFiaWxpdHlDaGVja2VyIiwib3duZXJEb2N1bWVudCIsImNhbmRpZGF0ZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5jbHVkZUNvbnRhaW5lciIsIkFycmF5Iiwic2xpY2UiLCJhcHBseSIsInVuc2hpZnQiLCJpc05vZGVNYXRjaGluZ1NlbGVjdG9yVGFiYmFibGUiLCJnZXRUYWJpbmRleCIsInB1c2giLCJkb2N1bWVudE9yZGVyIiwidGFiSW5kZXgiLCJzb3J0Iiwic29ydE9yZGVyZWRUYWJiYWJsZXMiLCJtYXAiLCJhIiwiY29uY2F0IiwiaXNOb2RlTWF0Y2hpbmdTZWxlY3RvckZvY3VzYWJsZSIsImlzSW5wdXQiLCJ0eXBlIiwiaXNSYWRpbyIsImNoZWNrZWQiLCJub2RlcyIsImdldENoZWNrZWRSYWRpbyIsImlzVGFiYmFibGVSYWRpbyIsImlzTm9uVGFiYmFibGVSYWRpbyIsImRpc2FibGVkIiwiaXNIaWRkZW5JbnB1dCIsImlzVW50b3VjaGFibGUiLCJpc1RhYmJhYmxlIiwiZm9jdXNhYmxlQ2FuZGlkYXRlU2VsZWN0b3IiLCJ0YWJpbmRleEF0dHIiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsImlzTmFOIiwiY29udGVudEVkaXRhYmxlIiwiaXNDb250ZW50RWRpdGFibGUiLCJiIiwiZWxlbWVudERvY3VtZW50IiwidGhpcyIsImNhY2hlIiwiaGFzRGlzcGxheU5vbmUiLCJub2RlQ29tcHV0ZWRTdHlsZSIsIm5vZGVUeXBlIiwiTm9kZSIsIkVMRU1FTlRfTk9ERSIsImNhY2hlZCIsImxpc3QiLCJwcmVkaWNhdGUiLCJmaW5kIiwiaXRlbSIsInJlc3VsdCIsImRlZmF1bHRWaWV3IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRpc3BsYXkiLCJwYXJlbnROb2RlIiwiZG9jdW1lbnRFbGVtZW50IiwiY29tcHV0ZWRTdHlsZSIsInZpc2liaWxpdHkiLCJhcmd1bWVudHMiLCJzb3VyY2UiLCJEYXRhQXR0cmlidXRlcyIsIlBvcGluSWQiLCJQb3BpbkJ0bk9wZW4iLCJQb3BpbkJ0bkNsb3NlIiwiUG9waW5Mb2FkVXJsIiwiU2VsZWN0b3JzIiwicG9waW4iLCJidG5PcGVuIiwiYnRuQ2xvc2UiLCJwb3Bpbk1haW4iLCJwb3BpbkNvbnRlbnQiLCJDbGFzc2VzIiwiUG9waW5PcGVuIiwiUG9waW5Mb2FkaW5nIiwicG9waW5fUG9waW4iLCJbb2JqZWN0IE9iamVjdF0iLCJ0cmFwRm9jdXMiLCJjbGlja091dHNpZGUiLCJsb2FkIiwibG9hZFR5cGUiLCJsb2FkU2VsZWN0b3IiLCJsb2FkRXJyb3IiLCJ0aGVuT3BlbiIsInNlbGVjdG9ycyIsIl9lbGVtZW50IiwicG9waW5JZCIsImRhdGFzZXQiLCJjb250ZW50UG9waW4iLCJvcGVuQnRucyIsImNsb3NlQnRucyIsInBvcGluTG9hZCIsImRldGFpbCIsImNhbGxiYWNrIiwib3BlbiIsImNsb3NlIiwiaW5pdCIsImJ0biIsImhhbmRsZU9wZW5CdG4iLCJoYW5kbGVDbG9zZUJ0biIsImJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImV2ZW50IiwiY2xvc2VzdCIsImlzRXF1YWxOb2RlIiwiZm9jdXNfdHJhcF9kZWZhdWx0IiwibG9hZENvbnRlbnQiLCJvcGVudEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwicmVtb3ZlIiwidGhlbk9wZW5FdmVudCIsInVybCIsImlubmVySFRNTCIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImNvbnRlbnQiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJ0ZXh0IiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsIm91dGVySFRNTCIsImNhdGNoIiwiY29uc29sZSIsImxvZyIsImZvckVhY2giLCJsb2dpbkNhbGxiYWNrIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxP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R0FBQWpGLEtBQUEvQyxRQUFBeUYsYUFBQSxDQUNBLE1BQUEwQyxFQUFBeE0sU0FBQXlNLGNBQUEsT0FDQUQsRUFBQVIsVUFBQUssRUFDQUEsRUFBQUcsRUFBQXRNLGNBQUFrSCxLQUFBL0MsUUFBQXlGLGNBQUE0QyxVQUVBdEYsS0FBQWlELGFBQUFpQyxtQkFBQSxhQUFBRCxRQUVBM0ssSUFBQTBGLEtBQUEvQyxRQUFBcUcsVUFDQXRELEtBQUEvQyxRQUFBcUcsZUFNQWlDLE1BQUEsS0FDQXZGLEtBQUFpRCxhQUFBMkIsVUFBQTVFLEtBQUEvQyxRQUFBMEYsYUNoTkE2QyxRQUFBQyxJQUFBLFVBQ0E3TSxTQUNBOEUsaUJBQUEsYUFDQWdJLFFBQUFqTixJQUNBQSxFQUFBbUosTUFBQSxJQUF3QlEsRUFBSzNKLEVBQUEsQ0FDN0IrSixLQUFBLFNBQ0FFLGFBQUEsY0FDQVksZUFBY2hKLEdBQUlxTCIsImZpbGUiOiJwb3Bpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG4iLCJ2YXIgdGFiYmFibGUgPSByZXF1aXJlKCd0YWJiYWJsZScpO1xudmFyIHh0ZW5kID0gcmVxdWlyZSgneHRlbmQnKTtcblxudmFyIGxpc3RlbmluZ0ZvY3VzVHJhcCA9IG51bGw7XG5cbmZ1bmN0aW9uIGZvY3VzVHJhcChlbGVtZW50LCB1c2VyT3B0aW9ucykge1xuICB2YXIgZG9jID0gZG9jdW1lbnQ7XG4gIHZhciBjb250YWluZXIgPVxuICAgIHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJyA/IGRvYy5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpIDogZWxlbWVudDtcblxuICB2YXIgY29uZmlnID0geHRlbmQoXG4gICAge1xuICAgICAgcmV0dXJuRm9jdXNPbkRlYWN0aXZhdGU6IHRydWUsXG4gICAgICBlc2NhcGVEZWFjdGl2YXRlczogdHJ1ZVxuICAgIH0sXG4gICAgdXNlck9wdGlvbnNcbiAgKTtcblxuICB2YXIgc3RhdGUgPSB7XG4gICAgZmlyc3RUYWJiYWJsZU5vZGU6IG51bGwsXG4gICAgbGFzdFRhYmJhYmxlTm9kZTogbnVsbCxcbiAgICBub2RlRm9jdXNlZEJlZm9yZUFjdGl2YXRpb246IG51bGwsXG4gICAgbW9zdFJlY2VudGx5Rm9jdXNlZE5vZGU6IG51bGwsXG4gICAgYWN0aXZlOiBmYWxzZSxcbiAgICBwYXVzZWQ6IGZhbHNlXG4gIH07XG5cbiAgdmFyIHRyYXAgPSB7XG4gICAgYWN0aXZhdGU6IGFjdGl2YXRlLFxuICAgIGRlYWN0aXZhdGU6IGRlYWN0aXZhdGUsXG4gICAgcGF1c2U6IHBhdXNlLFxuICAgIHVucGF1c2U6IHVucGF1c2VcbiAgfTtcblxuICByZXR1cm4gdHJhcDtcblxuICBmdW5jdGlvbiBhY3RpdmF0ZShhY3RpdmF0ZU9wdGlvbnMpIHtcbiAgICBpZiAoc3RhdGUuYWN0aXZlKSByZXR1cm47XG5cbiAgICB1cGRhdGVUYWJiYWJsZU5vZGVzKCk7XG5cbiAgICBzdGF0ZS5hY3RpdmUgPSB0cnVlO1xuICAgIHN0YXRlLnBhdXNlZCA9IGZhbHNlO1xuICAgIHN0YXRlLm5vZGVGb2N1c2VkQmVmb3JlQWN0aXZhdGlvbiA9IGRvYy5hY3RpdmVFbGVtZW50O1xuXG4gICAgdmFyIG9uQWN0aXZhdGUgPVxuICAgICAgYWN0aXZhdGVPcHRpb25zICYmIGFjdGl2YXRlT3B0aW9ucy5vbkFjdGl2YXRlXG4gICAgICAgID8gYWN0aXZhdGVPcHRpb25zLm9uQWN0aXZhdGVcbiAgICAgICAgOiBjb25maWcub25BY3RpdmF0ZTtcbiAgICBpZiAob25BY3RpdmF0ZSkge1xuICAgICAgb25BY3RpdmF0ZSgpO1xuICAgIH1cblxuICAgIGFkZExpc3RlbmVycygpO1xuICAgIHJldHVybiB0cmFwO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVhY3RpdmF0ZShkZWFjdGl2YXRlT3B0aW9ucykge1xuICAgIGlmICghc3RhdGUuYWN0aXZlKSByZXR1cm47XG5cbiAgICByZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICBzdGF0ZS5hY3RpdmUgPSBmYWxzZTtcbiAgICBzdGF0ZS5wYXVzZWQgPSBmYWxzZTtcblxuICAgIHZhciBvbkRlYWN0aXZhdGUgPVxuICAgICAgZGVhY3RpdmF0ZU9wdGlvbnMgJiYgZGVhY3RpdmF0ZU9wdGlvbnMub25EZWFjdGl2YXRlICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBkZWFjdGl2YXRlT3B0aW9ucy5vbkRlYWN0aXZhdGVcbiAgICAgICAgOiBjb25maWcub25EZWFjdGl2YXRlO1xuICAgIGlmIChvbkRlYWN0aXZhdGUpIHtcbiAgICAgIG9uRGVhY3RpdmF0ZSgpO1xuICAgIH1cblxuICAgIHZhciByZXR1cm5Gb2N1cyA9XG4gICAgICBkZWFjdGl2YXRlT3B0aW9ucyAmJiBkZWFjdGl2YXRlT3B0aW9ucy5yZXR1cm5Gb2N1cyAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gZGVhY3RpdmF0ZU9wdGlvbnMucmV0dXJuRm9jdXNcbiAgICAgICAgOiBjb25maWcucmV0dXJuRm9jdXNPbkRlYWN0aXZhdGU7XG4gICAgaWYgKHJldHVybkZvY3VzKSB7XG4gICAgICBkZWxheShmdW5jdGlvbigpIHtcbiAgICAgICAgdHJ5Rm9jdXMoc3RhdGUubm9kZUZvY3VzZWRCZWZvcmVBY3RpdmF0aW9uKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0cmFwO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgaWYgKHN0YXRlLnBhdXNlZCB8fCAhc3RhdGUuYWN0aXZlKSByZXR1cm47XG4gICAgc3RhdGUucGF1c2VkID0gdHJ1ZTtcbiAgICByZW1vdmVMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVucGF1c2UoKSB7XG4gICAgaWYgKCFzdGF0ZS5wYXVzZWQgfHwgIXN0YXRlLmFjdGl2ZSkgcmV0dXJuO1xuICAgIHN0YXRlLnBhdXNlZCA9IGZhbHNlO1xuICAgIGFkZExpc3RlbmVycygpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkTGlzdGVuZXJzKCkge1xuICAgIGlmICghc3RhdGUuYWN0aXZlKSByZXR1cm47XG5cbiAgICAvLyBUaGVyZSBjYW4gYmUgb25seSBvbmUgbGlzdGVuaW5nIGZvY3VzIHRyYXAgYXQgYSB0aW1lXG4gICAgaWYgKGxpc3RlbmluZ0ZvY3VzVHJhcCkge1xuICAgICAgbGlzdGVuaW5nRm9jdXNUcmFwLnBhdXNlKCk7XG4gICAgfVxuICAgIGxpc3RlbmluZ0ZvY3VzVHJhcCA9IHRyYXA7XG5cbiAgICB1cGRhdGVUYWJiYWJsZU5vZGVzKCk7XG5cbiAgICAvLyBEZWxheSBlbnN1cmVzIHRoYXQgdGhlIGZvY3VzZWQgZWxlbWVudCBkb2Vzbid0IGNhcHR1cmUgdGhlIGV2ZW50XG4gICAgLy8gdGhhdCBjYXVzZWQgdGhlIGZvY3VzIHRyYXAgYWN0aXZhdGlvbi5cbiAgICBkZWxheShmdW5jdGlvbigpIHtcbiAgICAgIHRyeUZvY3VzKGdldEluaXRpYWxGb2N1c05vZGUoKSk7XG4gICAgfSk7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBjaGVja0ZvY3VzSW4sIHRydWUpO1xuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBjaGVja1BvaW50ZXJEb3duLCB0cnVlKTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGNoZWNrUG9pbnRlckRvd24sIHRydWUpO1xuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZWNrQ2xpY2ssIHRydWUpO1xuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2hlY2tLZXksIHRydWUpO1xuXG4gICAgcmV0dXJuIHRyYXA7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKCFzdGF0ZS5hY3RpdmUgfHwgbGlzdGVuaW5nRm9jdXNUcmFwICE9PSB0cmFwKSByZXR1cm47XG5cbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGNoZWNrRm9jdXNJbiwgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGNoZWNrUG9pbnRlckRvd24sIHRydWUpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgY2hlY2tQb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hlY2tDbGljaywgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjaGVja0tleSwgdHJ1ZSk7XG5cbiAgICBsaXN0ZW5pbmdGb2N1c1RyYXAgPSBudWxsO1xuXG4gICAgcmV0dXJuIHRyYXA7XG4gIH1cblxuICBmdW5jdGlvbiBnZXROb2RlRm9yT3B0aW9uKG9wdGlvbk5hbWUpIHtcbiAgICB2YXIgb3B0aW9uVmFsdWUgPSBjb25maWdbb3B0aW9uTmFtZV07XG4gICAgdmFyIG5vZGUgPSBvcHRpb25WYWx1ZTtcbiAgICBpZiAoIW9wdGlvblZhbHVlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25WYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG5vZGUgPSBkb2MucXVlcnlTZWxlY3RvcihvcHRpb25WYWx1ZSk7XG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdgJyArIG9wdGlvbk5hbWUgKyAnYCByZWZlcnMgdG8gbm8ga25vd24gbm9kZScpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvblZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBub2RlID0gb3B0aW9uVmFsdWUoKTtcbiAgICAgIGlmICghbm9kZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2AnICsgb3B0aW9uTmFtZSArICdgIGRpZCBub3QgcmV0dXJuIGEgbm9kZScpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluaXRpYWxGb2N1c05vZGUoKSB7XG4gICAgdmFyIG5vZGU7XG4gICAgaWYgKGdldE5vZGVGb3JPcHRpb24oJ2luaXRpYWxGb2N1cycpICE9PSBudWxsKSB7XG4gICAgICBub2RlID0gZ2V0Tm9kZUZvck9wdGlvbignaW5pdGlhbEZvY3VzJyk7XG4gICAgfSBlbHNlIGlmIChjb250YWluZXIuY29udGFpbnMoZG9jLmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICBub2RlID0gZG9jLmFjdGl2ZUVsZW1lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUgPSBzdGF0ZS5maXJzdFRhYmJhYmxlTm9kZSB8fCBnZXROb2RlRm9yT3B0aW9uKCdmYWxsYmFja0ZvY3VzJyk7XG4gICAgfVxuXG4gICAgaWYgKCFub2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiWW91IGNhbid0IGhhdmUgYSBmb2N1cy10cmFwIHdpdGhvdXQgYXQgbGVhc3Qgb25lIGZvY3VzYWJsZSBlbGVtZW50XCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICAvLyBUaGlzIG5lZWRzIHRvIGJlIGRvbmUgb24gbW91c2Vkb3duIGFuZCB0b3VjaHN0YXJ0IGluc3RlYWQgb2YgY2xpY2tcbiAgLy8gc28gdGhhdCBpdCBwcmVjZWRlcyB0aGUgZm9jdXMgZXZlbnQuXG4gIGZ1bmN0aW9uIGNoZWNrUG9pbnRlckRvd24oZSkge1xuICAgIGlmIChjb250YWluZXIuY29udGFpbnMoZS50YXJnZXQpKSByZXR1cm47XG4gICAgaWYgKGNvbmZpZy5jbGlja091dHNpZGVEZWFjdGl2YXRlcykge1xuICAgICAgZGVhY3RpdmF0ZSh7XG4gICAgICAgIHJldHVybkZvY3VzOiAhdGFiYmFibGUuaXNGb2N1c2FibGUoZS50YXJnZXQpXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEluIGNhc2UgZm9jdXMgZXNjYXBlcyB0aGUgdHJhcCBmb3Igc29tZSBzdHJhbmdlIHJlYXNvbiwgcHVsbCBpdCBiYWNrIGluLlxuICBmdW5jdGlvbiBjaGVja0ZvY3VzSW4oZSkge1xuICAgIC8vIEluIEZpcmVmb3ggd2hlbiB5b3UgVGFiIG91dCBvZiBhbiBpZnJhbWUgdGhlIERvY3VtZW50IGlzIGJyaWVmbHkgZm9jdXNlZC5cbiAgICBpZiAoY29udGFpbmVyLmNvbnRhaW5zKGUudGFyZ2V0KSB8fCBlLnRhcmdldCBpbnN0YW5jZW9mIERvY3VtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgdHJ5Rm9jdXMoc3RhdGUubW9zdFJlY2VudGx5Rm9jdXNlZE5vZGUgfHwgZ2V0SW5pdGlhbEZvY3VzTm9kZSgpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrS2V5KGUpIHtcbiAgICBpZiAoY29uZmlnLmVzY2FwZURlYWN0aXZhdGVzICE9PSBmYWxzZSAmJiBpc0VzY2FwZUV2ZW50KGUpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkZWFjdGl2YXRlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpc1RhYkV2ZW50KGUpKSB7XG4gICAgICBjaGVja1RhYihlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICAvLyBIaWphY2sgVGFiIGV2ZW50cyBvbiB0aGUgZmlyc3QgYW5kIGxhc3QgZm9jdXNhYmxlIG5vZGVzIG9mIHRoZSB0cmFwLFxuICAvLyBpbiBvcmRlciB0byBwcmV2ZW50IGZvY3VzIGZyb20gZXNjYXBpbmcuIElmIGl0IGVzY2FwZXMgZm9yIGV2ZW4gYVxuICAvLyBtb21lbnQgaXQgY2FuIGVuZCB1cCBzY3JvbGxpbmcgdGhlIHBhZ2UgYW5kIGNhdXNpbmcgY29uZnVzaW9uIHNvIHdlXG4gIC8vIGtpbmQgb2YgbmVlZCB0byBjYXB0dXJlIHRoZSBhY3Rpb24gYXQgdGhlIGtleWRvd24gcGhhc2UuXG4gIGZ1bmN0aW9uIGNoZWNrVGFiKGUpIHtcbiAgICB1cGRhdGVUYWJiYWJsZU5vZGVzKCk7XG4gICAgaWYgKGUuc2hpZnRLZXkgJiYgZS50YXJnZXQgPT09IHN0YXRlLmZpcnN0VGFiYmFibGVOb2RlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0cnlGb2N1cyhzdGF0ZS5sYXN0VGFiYmFibGVOb2RlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFlLnNoaWZ0S2V5ICYmIGUudGFyZ2V0ID09PSBzdGF0ZS5sYXN0VGFiYmFibGVOb2RlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0cnlGb2N1cyhzdGF0ZS5maXJzdFRhYmJhYmxlTm9kZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tDbGljayhlKSB7XG4gICAgaWYgKGNvbmZpZy5jbGlja091dHNpZGVEZWFjdGl2YXRlcykgcmV0dXJuO1xuICAgIGlmIChjb250YWluZXIuY29udGFpbnMoZS50YXJnZXQpKSByZXR1cm47XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVUYWJiYWJsZU5vZGVzKCkge1xuICAgIHZhciB0YWJiYWJsZU5vZGVzID0gdGFiYmFibGUoY29udGFpbmVyKTtcbiAgICBzdGF0ZS5maXJzdFRhYmJhYmxlTm9kZSA9IHRhYmJhYmxlTm9kZXNbMF0gfHwgZ2V0SW5pdGlhbEZvY3VzTm9kZSgpO1xuICAgIHN0YXRlLmxhc3RUYWJiYWJsZU5vZGUgPVxuICAgICAgdGFiYmFibGVOb2Rlc1t0YWJiYWJsZU5vZGVzLmxlbmd0aCAtIDFdIHx8IGdldEluaXRpYWxGb2N1c05vZGUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyeUZvY3VzKG5vZGUpIHtcbiAgICBpZiAobm9kZSA9PT0gZG9jLmFjdGl2ZUVsZW1lbnQpIHJldHVybjtcbiAgICBpZiAoIW5vZGUgfHwgIW5vZGUuZm9jdXMpIHtcbiAgICAgIHRyeUZvY3VzKGdldEluaXRpYWxGb2N1c05vZGUoKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbm9kZS5mb2N1cygpO1xuICAgIHN0YXRlLm1vc3RSZWNlbnRseUZvY3VzZWROb2RlID0gbm9kZTtcbiAgICBpZiAoaXNTZWxlY3RhYmxlSW5wdXQobm9kZSkpIHtcbiAgICAgIG5vZGUuc2VsZWN0KCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGlzU2VsZWN0YWJsZUlucHV0KG5vZGUpIHtcbiAgcmV0dXJuIChcbiAgICBub2RlLnRhZ05hbWUgJiZcbiAgICBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JyAmJlxuICAgIHR5cGVvZiBub2RlLnNlbGVjdCA9PT0gJ2Z1bmN0aW9uJ1xuICApO1xufVxuXG5mdW5jdGlvbiBpc0VzY2FwZUV2ZW50KGUpIHtcbiAgcmV0dXJuIGUua2V5ID09PSAnRXNjYXBlJyB8fCBlLmtleSA9PT0gJ0VzYycgfHwgZS5rZXlDb2RlID09PSAyNztcbn1cblxuZnVuY3Rpb24gaXNUYWJFdmVudChlKSB7XG4gIHJldHVybiBlLmtleSA9PT0gJ1RhYicgfHwgZS5rZXlDb2RlID09PSA5O1xufVxuXG5mdW5jdGlvbiBkZWxheShmbikge1xuICByZXR1cm4gc2V0VGltZW91dChmbiwgMCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZm9jdXNUcmFwO1xuIiwidmFyIGNhbmRpZGF0ZVNlbGVjdG9ycyA9IFtcbiAgJ2lucHV0JyxcbiAgJ3NlbGVjdCcsXG4gICd0ZXh0YXJlYScsXG4gICdhW2hyZWZdJyxcbiAgJ2J1dHRvbicsXG4gICdbdGFiaW5kZXhdJyxcbiAgJ2F1ZGlvW2NvbnRyb2xzXScsXG4gICd2aWRlb1tjb250cm9sc10nLFxuICAnW2NvbnRlbnRlZGl0YWJsZV06bm90KFtjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiXSknLFxuXTtcbnZhciBjYW5kaWRhdGVTZWxlY3RvciA9IGNhbmRpZGF0ZVNlbGVjdG9ycy5qb2luKCcsJyk7XG5cbnZhciBtYXRjaGVzID0gdHlwZW9mIEVsZW1lbnQgPT09ICd1bmRlZmluZWQnXG4gID8gZnVuY3Rpb24gKCkge31cbiAgOiBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzIHx8IEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtcblxuZnVuY3Rpb24gdGFiYmFibGUoZWwsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgdmFyIGVsZW1lbnREb2N1bWVudCA9IGVsLm93bmVyRG9jdW1lbnQgfHwgZWw7XG4gIHZhciByZWd1bGFyVGFiYmFibGVzID0gW107XG4gIHZhciBvcmRlcmVkVGFiYmFibGVzID0gW107XG5cbiAgdmFyIHVudG91Y2hhYmlsaXR5Q2hlY2tlciA9IG5ldyBVbnRvdWNoYWJpbGl0eUNoZWNrZXIoZWxlbWVudERvY3VtZW50KTtcbiAgdmFyIGNhbmRpZGF0ZXMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKGNhbmRpZGF0ZVNlbGVjdG9yKTtcblxuICBpZiAob3B0aW9ucy5pbmNsdWRlQ29udGFpbmVyKSB7XG4gICAgaWYgKG1hdGNoZXMuY2FsbChlbCwgY2FuZGlkYXRlU2VsZWN0b3IpKSB7XG4gICAgICBjYW5kaWRhdGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGNhbmRpZGF0ZXMpO1xuICAgICAgY2FuZGlkYXRlcy51bnNoaWZ0KGVsKTtcbiAgICB9XG4gIH1cblxuICB2YXIgaSwgY2FuZGlkYXRlLCBjYW5kaWRhdGVUYWJpbmRleDtcbiAgZm9yIChpID0gMDsgaSA8IGNhbmRpZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjYW5kaWRhdGUgPSBjYW5kaWRhdGVzW2ldO1xuXG4gICAgaWYgKCFpc05vZGVNYXRjaGluZ1NlbGVjdG9yVGFiYmFibGUoY2FuZGlkYXRlLCB1bnRvdWNoYWJpbGl0eUNoZWNrZXIpKSBjb250aW51ZTtcblxuICAgIGNhbmRpZGF0ZVRhYmluZGV4ID0gZ2V0VGFiaW5kZXgoY2FuZGlkYXRlKTtcbiAgICBpZiAoY2FuZGlkYXRlVGFiaW5kZXggPT09IDApIHtcbiAgICAgIHJlZ3VsYXJUYWJiYWJsZXMucHVzaChjYW5kaWRhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcmRlcmVkVGFiYmFibGVzLnB1c2goe1xuICAgICAgICBkb2N1bWVudE9yZGVyOiBpLFxuICAgICAgICB0YWJJbmRleDogY2FuZGlkYXRlVGFiaW5kZXgsXG4gICAgICAgIG5vZGU6IGNhbmRpZGF0ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHZhciB0YWJiYWJsZU5vZGVzID0gb3JkZXJlZFRhYmJhYmxlc1xuICAgIC5zb3J0KHNvcnRPcmRlcmVkVGFiYmFibGVzKVxuICAgIC5tYXAoZnVuY3Rpb24oYSkgeyByZXR1cm4gYS5ub2RlIH0pXG4gICAgLmNvbmNhdChyZWd1bGFyVGFiYmFibGVzKTtcblxuICByZXR1cm4gdGFiYmFibGVOb2Rlcztcbn1cblxudGFiYmFibGUuaXNUYWJiYWJsZSA9IGlzVGFiYmFibGU7XG50YWJiYWJsZS5pc0ZvY3VzYWJsZSA9IGlzRm9jdXNhYmxlO1xuXG5mdW5jdGlvbiBpc05vZGVNYXRjaGluZ1NlbGVjdG9yVGFiYmFibGUobm9kZSwgdW50b3VjaGFiaWxpdHlDaGVja2VyKSB7XG4gIGlmIChcbiAgICAhaXNOb2RlTWF0Y2hpbmdTZWxlY3RvckZvY3VzYWJsZShub2RlLCB1bnRvdWNoYWJpbGl0eUNoZWNrZXIpXG4gICAgfHwgaXNOb25UYWJiYWJsZVJhZGlvKG5vZGUpXG4gICAgfHwgZ2V0VGFiaW5kZXgobm9kZSkgPCAwXG4gICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNUYWJiYWJsZShub2RlLCB1bnRvdWNoYWJpbGl0eUNoZWNrZXIpIHtcbiAgaWYgKCFub2RlKSB0aHJvdyBuZXcgRXJyb3IoJ05vIG5vZGUgcHJvdmlkZWQnKTtcbiAgaWYgKG1hdGNoZXMuY2FsbChub2RlLCBjYW5kaWRhdGVTZWxlY3RvcikgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBpc05vZGVNYXRjaGluZ1NlbGVjdG9yVGFiYmFibGUobm9kZSwgdW50b3VjaGFiaWxpdHlDaGVja2VyKTtcbn1cblxuZnVuY3Rpb24gaXNOb2RlTWF0Y2hpbmdTZWxlY3RvckZvY3VzYWJsZShub2RlLCB1bnRvdWNoYWJpbGl0eUNoZWNrZXIpIHtcbiAgdW50b3VjaGFiaWxpdHlDaGVja2VyID0gdW50b3VjaGFiaWxpdHlDaGVja2VyIHx8IG5ldyBVbnRvdWNoYWJpbGl0eUNoZWNrZXIobm9kZS5vd25lckRvY3VtZW50IHx8IG5vZGUpO1xuICBpZiAoXG4gICAgbm9kZS5kaXNhYmxlZFxuICAgIHx8IGlzSGlkZGVuSW5wdXQobm9kZSlcbiAgICB8fCB1bnRvdWNoYWJpbGl0eUNoZWNrZXIuaXNVbnRvdWNoYWJsZShub2RlKVxuICApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbnZhciBmb2N1c2FibGVDYW5kaWRhdGVTZWxlY3RvciA9IGNhbmRpZGF0ZVNlbGVjdG9ycy5jb25jYXQoJ2lmcmFtZScpLmpvaW4oJywnKTtcbmZ1bmN0aW9uIGlzRm9jdXNhYmxlKG5vZGUsIHVudG91Y2hhYmlsaXR5Q2hlY2tlcikge1xuICBpZiAoIW5vZGUpIHRocm93IG5ldyBFcnJvcignTm8gbm9kZSBwcm92aWRlZCcpO1xuICBpZiAobWF0Y2hlcy5jYWxsKG5vZGUsIGZvY3VzYWJsZUNhbmRpZGF0ZVNlbGVjdG9yKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGlzTm9kZU1hdGNoaW5nU2VsZWN0b3JGb2N1c2FibGUobm9kZSwgdW50b3VjaGFiaWxpdHlDaGVja2VyKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGFiaW5kZXgobm9kZSkge1xuICB2YXIgdGFiaW5kZXhBdHRyID0gcGFyc2VJbnQobm9kZS5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JyksIDEwKTtcbiAgaWYgKCFpc05hTih0YWJpbmRleEF0dHIpKSByZXR1cm4gdGFiaW5kZXhBdHRyO1xuICAvLyBCcm93c2VycyBkbyBub3QgcmV0dXJuIGB0YWJJbmRleGAgY29ycmVjdGx5IGZvciBjb250ZW50RWRpdGFibGUgbm9kZXM7XG4gIC8vIHNvIGlmIHRoZXkgZG9uJ3QgaGF2ZSBhIHRhYmluZGV4IGF0dHJpYnV0ZSBzcGVjaWZpY2FsbHkgc2V0LCBhc3N1bWUgaXQncyAwLlxuICBpZiAoaXNDb250ZW50RWRpdGFibGUobm9kZSkpIHJldHVybiAwO1xuICByZXR1cm4gbm9kZS50YWJJbmRleDtcbn1cblxuZnVuY3Rpb24gc29ydE9yZGVyZWRUYWJiYWJsZXMoYSwgYikge1xuICByZXR1cm4gYS50YWJJbmRleCA9PT0gYi50YWJJbmRleCA/IGEuZG9jdW1lbnRPcmRlciAtIGIuZG9jdW1lbnRPcmRlciA6IGEudGFiSW5kZXggLSBiLnRhYkluZGV4O1xufVxuXG4vLyBBcnJheS5wcm90b3R5cGUuZmluZCBub3QgYXZhaWxhYmxlIGluIElFLlxuZnVuY3Rpb24gZmluZChsaXN0LCBwcmVkaWNhdGUpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGxpc3QubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocHJlZGljYXRlKGxpc3RbaV0pKSByZXR1cm4gbGlzdFtpXTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0NvbnRlbnRFZGl0YWJsZShub2RlKSB7XG4gIHJldHVybiBub2RlLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnO1xufVxuXG5mdW5jdGlvbiBpc0lucHV0KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUudGFnTmFtZSA9PT0gJ0lOUFVUJztcbn1cblxuZnVuY3Rpb24gaXNIaWRkZW5JbnB1dChub2RlKSB7XG4gIHJldHVybiBpc0lucHV0KG5vZGUpICYmIG5vZGUudHlwZSA9PT0gJ2hpZGRlbic7XG59XG5cbmZ1bmN0aW9uIGlzUmFkaW8obm9kZSkge1xuICByZXR1cm4gaXNJbnB1dChub2RlKSAmJiBub2RlLnR5cGUgPT09ICdyYWRpbyc7XG59XG5cbmZ1bmN0aW9uIGlzTm9uVGFiYmFibGVSYWRpbyhub2RlKSB7XG4gIHJldHVybiBpc1JhZGlvKG5vZGUpICYmICFpc1RhYmJhYmxlUmFkaW8obm9kZSk7XG59XG5cbmZ1bmN0aW9uIGdldENoZWNrZWRSYWRpbyhub2Rlcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKG5vZGVzW2ldLmNoZWNrZWQpIHtcbiAgICAgIHJldHVybiBub2Rlc1tpXTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNUYWJiYWJsZVJhZGlvKG5vZGUpIHtcbiAgaWYgKCFub2RlLm5hbWUpIHJldHVybiB0cnVlO1xuICAvLyBUaGlzIHdvbid0IGFjY291bnQgZm9yIHRoZSBlZGdlIGNhc2Ugd2hlcmUgeW91IGhhdmUgcmFkaW8gZ3JvdXBzIHdpdGggdGhlIHNhbWVcbiAgLy8gaW4gc2VwYXJhdGUgZm9ybXMgb24gdGhlIHNhbWUgcGFnZS5cbiAgdmFyIHJhZGlvU2V0ID0gbm9kZS5vd25lckRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXVtuYW1lPVwiJyArIG5vZGUubmFtZSArICdcIl0nKTtcbiAgdmFyIGNoZWNrZWQgPSBnZXRDaGVja2VkUmFkaW8ocmFkaW9TZXQpO1xuICByZXR1cm4gIWNoZWNrZWQgfHwgY2hlY2tlZCA9PT0gbm9kZTtcbn1cblxuLy8gQW4gZWxlbWVudCBpcyBcInVudG91Y2hhYmxlXCIgaWYgKml0IG9yIG9uZSBvZiBpdHMgYW5jZXN0b3JzKiBoYXNcbi8vIGB2aXNpYmlsaXR5OiBoaWRkZW5gIG9yIGBkaXNwbGF5OiBub25lYC5cbmZ1bmN0aW9uIFVudG91Y2hhYmlsaXR5Q2hlY2tlcihlbGVtZW50RG9jdW1lbnQpIHtcbiAgdGhpcy5kb2MgPSBlbGVtZW50RG9jdW1lbnQ7XG4gIC8vIE5vZGUgY2FjaGUgbXVzdCBiZSByZWZyZXNoZWQgb24gZXZlcnkgY2hlY2ssIGluIGNhc2VcbiAgLy8gdGhlIGNvbnRlbnQgb2YgdGhlIGVsZW1lbnQgaGFzIGNoYW5nZWQuIFRoZSBjYWNoZSBjb250YWlucyB0dXBsZXNcbiAgLy8gbWFwcGluZyBub2RlcyB0byB0aGVpciBib29sZWFuIHJlc3VsdC5cbiAgdGhpcy5jYWNoZSA9IFtdO1xufVxuXG4vLyBnZXRDb21wdXRlZFN0eWxlIGFjY3VyYXRlbHkgcmVmbGVjdHMgYHZpc2liaWxpdHk6IGhpZGRlbmAgb2YgYW5jZXN0b3JzXG4vLyBidXQgbm90IGBkaXNwbGF5OiBub25lYCwgc28gd2UgbmVlZCB0byByZWN1cnNpdmVseSBjaGVjayBwYXJlbnRzLlxuVW50b3VjaGFiaWxpdHlDaGVja2VyLnByb3RvdHlwZS5oYXNEaXNwbGF5Tm9uZSA9IGZ1bmN0aW9uIGhhc0Rpc3BsYXlOb25lKG5vZGUsIG5vZGVDb21wdXRlZFN0eWxlKSB7XG4gIGlmIChub2RlLm5vZGVUeXBlICE9PSBOb2RlLkVMRU1FTlRfTk9ERSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gU2VhcmNoIGZvciBhIGNhY2hlZCByZXN1bHQuXG4gICAgdmFyIGNhY2hlZCA9IGZpbmQodGhpcy5jYWNoZSwgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0gPT09IG5vZGU7XG4gICAgfSk7XG4gICAgaWYgKGNhY2hlZCkgcmV0dXJuIGNhY2hlZFsxXTtcblxuICAgIG5vZGVDb21wdXRlZFN0eWxlID0gbm9kZUNvbXB1dGVkU3R5bGUgfHwgdGhpcy5kb2MuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcblxuICAgIHZhciByZXN1bHQgPSBmYWxzZTtcblxuICAgIGlmIChub2RlQ29tcHV0ZWRTdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHtcbiAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgIHJlc3VsdCA9IHRoaXMuaGFzRGlzcGxheU5vbmUobm9kZS5wYXJlbnROb2RlKTtcbiAgICB9XG5cbiAgICB0aGlzLmNhY2hlLnB1c2goW25vZGUsIHJlc3VsdF0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuVW50b3VjaGFiaWxpdHlDaGVja2VyLnByb3RvdHlwZS5pc1VudG91Y2hhYmxlID0gZnVuY3Rpb24gaXNVbnRvdWNoYWJsZShub2RlKSB7XG4gIGlmIChub2RlID09PSB0aGlzLmRvYy5kb2N1bWVudEVsZW1lbnQpIHJldHVybiBmYWxzZTtcbiAgdmFyIGNvbXB1dGVkU3R5bGUgPSB0aGlzLmRvYy5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICBpZiAodGhpcy5oYXNEaXNwbGF5Tm9uZShub2RlLCBjb21wdXRlZFN0eWxlKSkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBjb21wdXRlZFN0eWxlLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRhYmJhYmxlO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBleHRlbmRcblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuZnVuY3Rpb24gZXh0ZW5kKCkge1xuICAgIHZhciB0YXJnZXQgPSB7fVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXVxuXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXRcbn1cbiIsImltcG9ydCBjcmVhdGVGb2N1c1RyYXAgZnJvbSAnZm9jdXMtdHJhcCc7XG5cbmNvbnN0IERhdGFBdHRyaWJ1dGVzID0ge1xuICBQb3BpbklkOiAnZGF0YS1wb3BpbicsXG4gIFBvcGluQnRuT3BlbjogJ2RhdGEtcG9waW4tb3BlbicsXG4gIFBvcGluQnRuQ2xvc2U6ICdkYXRhLXBvcGluLWNsb3NlJyxcbiAgUG9waW5Mb2FkVXJsOiAnZGF0YS1wb3Bpbi1sb2FkJ1xufTtcblxuY29uc3QgU2VsZWN0b3JzID0ge1xuICBwb3BpbjogJy5qcy1wb3BpbicsXG4gIGJ0bk9wZW46ICcuanMtcG9waW4tb3BlbicsXG4gIGJ0bkNsb3NlOiAnLmpzLXBvcGluLWNsb3NlJyxcbiAgcG9waW5NYWluOiAnLmpzLXBvcGluLW1haW4nLFxuICBwb3BpbkNvbnRlbnQ6ICcuanMtcG9waW4tY29udGVudCdcbn07XG5cbmNvbnN0IENsYXNzZXMgPSB7XG4gIFBvcGluT3BlbjogJ2lzLWVuYWJsZWQnLFxuICBQb3BpbkxvYWRpbmc6ICdpcy1sb2FkaW5nJ1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9waW4ge1xuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICAvLyBkZWZhdWx0c1xuICAgICAgdHJhcEZvY3VzOiB0cnVlLFxuICAgICAgY2xpY2tPdXRzaWRlOiB0cnVlLFxuICAgICAgbG9hZDogdW5kZWZpbmVkLFxuICAgICAgbG9hZFR5cGU6ICd0ZXh0JyxcbiAgICAgIGxvYWRTZWxlY3RvcjogdW5kZWZpbmVkLFxuICAgICAgbG9hZEVycm9yOiAnVW5lIGVycmV1ciBlc3Qgc3VydmVudWUgbG9ycyBkdSBjaGFyZ2VtZW50IGR1IGNvbnRlbnUuJyxcbiAgICAgIHRoZW5PcGVuOiB1bmRlZmluZWQsXG4gICAgICAvLyBvdmVyaWRlc1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHNlbGVjdG9yczoge1xuICAgICAgICAuLi5TZWxlY3RvcnMsXG4gICAgICAgIC4uLm9wdGlvbnMuc2VsZWN0b3JzXG4gICAgICB9XG4gICAgICBcbiAgICB9O1xuXG4gICAgLy8gR2xvYmFsc1xuICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50IHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLnNlbGVjdG9ycy5wb3Bpbik7XG4gICAgdGhpcy5wb3BpbklkID0gdGhpcy5fZWxlbWVudC5kYXRhc2V0LnBvcGluO1xuICAgIHRoaXMuY29udGVudFBvcGluID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAke3RoaXMub3B0aW9ucy5zZWxlY3RvcnMucG9waW5Db250ZW50fWApO1xuXG4gICAgLy8gQnV0dG9uc1xuICAgIHRoaXMub3BlbkJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgYCR7dGhpcy5vcHRpb25zLnNlbGVjdG9ycy5idG5PcGVufVske0RhdGFBdHRyaWJ1dGVzLlBvcGluQnRuT3Blbn09XCIke3RoaXMucG9waW5JZH1cIl1gXG4gICAgKTtcbiAgICB0aGlzLmNsb3NlQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICBgJHt0aGlzLm9wdGlvbnMuc2VsZWN0b3JzLmJ0bkNsb3NlfVske0RhdGFBdHRyaWJ1dGVzLlBvcGluQnRuQ2xvc2V9PVwiJHt0aGlzLnBvcGluSWR9XCJdYFxuICAgICk7XG5cbiAgICBpZiAodW5kZWZpbmVkICE9PSB0aGlzLl9lbGVtZW50LmRhdGFzZXQucG9waW5Mb2FkKSB7XG4gICAgICB0aGlzLm9wdGlvbnMubG9hZCA9IHRoaXMuX2VsZW1lbnQuZGF0YXNldC5wb3BpbkxvYWRcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgZXZlbnQgbGlzdGVuZXJzXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihgb3Blbi0ke3RoaXMucG9waW5JZH1gLCAoZSkgPT4ge1xuICAgICAgaWYgKGUuZGV0YWlsICYmIGUuZGV0YWlsLnRoZW5PcGVuKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy50aGVuT3BlbiA9IGUuZGV0YWlsLnRoZW5PcGVuXG4gICAgICB9XG5cbiAgICAgIGlmIChlLmRldGFpbCAmJiBlLmRldGFpbC5jYWxsYmFjaykge1xuICAgICAgICB0aGlzLm9wdGlvbnMuY2FsbGJhY2sgPSBlLmRldGFpbC5jYWxsYmFja1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9wZW4oKTtcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoYGNsb3NlLSR7dGhpcy5wb3BpbklkfWAsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICAvLyBLZXlib2FyZCBldmVudHNcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQnV0dG9ucyBldmVudHNcbiAgICBbLi4udGhpcy5vcGVuQnRuc10ubWFwKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHRoaXMuaGFuZGxlT3BlbkJ0bihlKSkpO1xuXG4gICAgWy4uLnRoaXMuY2xvc2VCdG5zXS5tYXAoYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gdGhpcy5oYW5kbGVDbG9zZUJ0bihlKSkpO1xuICB9O1xuXG4gIGhhbmRsZU9wZW5CdG4oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLm9wZW4oZS50YXJnZXQpO1xuICB9XG5cbiAgaGFuZGxlQ2xvc2VCdG4oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLmNsb3NlKCk7XG4gIH1cblxuICBvcGVuKGJ1dHRvbiA9IHVuZGVmaW5lZCkge1xuICAgIC8vIEFkZGluZyBjbGFzc2VzIGFuZCBhdHRyaWJ1dGVzXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENsYXNzZXMuUG9waW5PcGVuKTtcbiAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCBmYWxzZSk7XG5cblxuICAgIC8vIENsaWNrIG91dHNpZGUgZXZlbnRcbiAgICBpZih0aGlzLm9wdGlvbnMuY2xpY2tPdXRzaWRlKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XG4gICAgICAgIGlmICghdGFyZ2V0LmNsb3Nlc3QodGhpcy5vcHRpb25zLnNlbGVjdG9ycy5wb3Bpbk1haW4pXG4gICAgICAgICAgICAmJiAhdGFyZ2V0LmlzRXF1YWxOb2RlKGJ1dHRvbikpIHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvLyBGb2N1cyBoYW5kbGluZ1xuICAgIGlmICh0aGlzLm9wdGlvbnMudHJhcEZvY3VzKSB7XG4gICAgICB0aGlzLnRyYXBGb2N1cyA9IGNyZWF0ZUZvY3VzVHJhcCh0aGlzLl9lbGVtZW50KTtcbiAgICAgIHRoaXMudHJhcEZvY3VzLmFjdGl2YXRlKCk7XG4gICAgICB0aGlzLl9lbGVtZW50LmZvY3VzKCk7XG4gICAgfVxuXG4gICAgLy8gTG9hZCBjb250ZW50XG4gICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkICE9PSB1bmRlZmluZWQgJiYgXCJcIiAhPT0gdGhpcy5vcHRpb25zLmxvYWQpIHtcbiAgICAgIHRoaXMubG9hZENvbnRlbnQodGhpcy5vcHRpb25zLmxvYWQpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGV4ZWN1dGUgY2FsbGJhY2tcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMuY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUcmlnZ2VyIG9wZW4gZXZlbnRcbiAgICBjb25zdCBvcGVudEV2ZW50ID0gQ3VzdG9tRXZlbnQoXCJwb3Bpbi1vcGVuXCIsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICBwb3BpbklkOiB0aGlzLnBvcGluSWQsXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fZWxlbWVudC5kaXNwYXRjaEV2ZW50KG9wZW50RXZlbnQpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgLy8gZGlzYWJsZSBmb2N1cyB0cmFwXG4gICAgaWYgKHRoaXMub3B0aW9ucy50cmFwRm9jdXMpIHtcbiAgICAgIHRoaXMudHJhcEZvY3VzLmRlYWN0aXZhdGUoKTtcbiAgICB9XG4gICAgLy8gU2V0IGNsYXNzZXMgYW5kIGF0dHJpYnV0ZXNcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ2xhc3Nlcy5Qb3Bpbk9wZW4pO1xuICAgIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsIHRydWUpO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy50aGVuT3Blbikge1xuICAgICAgY29uc3QgdGhlbk9wZW5FdmVudCA9IG5ldyBDdXN0b21FdmVudChgb3Blbi0ke3RoaXMub3B0aW9ucy50aGVuT3Blbn1gKTtcbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQodGhlbk9wZW5FdmVudCk7XG4gICAgfVxuXG4gICAgLy8gVHJpZ2dlciBjbG9zZSBldmVudFxuICAgIGNvbnN0IG9wZW50RXZlbnQgPSBDdXN0b21FdmVudChcInBvcGluLWNsb3NlXCIsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICBwb3BpbklkOiB0aGlzLnBvcGluSWQsXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fZWxlbWVudC5kaXNwYXRjaEV2ZW50KG9wZW50RXZlbnQpO1xuICB9XG5cbiAgbG9hZENvbnRlbnQodXJsLCB0eXBlID0gXCJ0ZXh0XCIpIHtcbiAgICAvLyBDbGVhbiBwb3BpbiBjb250ZW50XG4gICAgdGhpcy5jb250ZW50UG9waW4uaW5uZXJIVE1MID0gJyc7XG4gICAgLy8gU2V0IGxvYWRpbmcgY2xhc3NcbiAgICB0aGlzLmNvbnRlbnRQb3Bpbi5jbGFzc0xpc3QuYWRkKENsYXNzZXMuUG9waW5Mb2FkaW5nKTtcbiAgICAvLyBtYWtlIGFqYXggY2FsbFxuICAgIGZldGNoKHVybClcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAvLyBSZW1vdmUgbG9hZGluZyBjbGFzc1xuICAgICAgICB0aGlzLmNvbnRlbnRQb3Bpbi5jbGFzc0xpc3QucmVtb3ZlKENsYXNzZXMuUG9waW5Mb2FkaW5nKTtcblxuICAgICAgICBpZiAoXCJqc29uXCIgPT09IHR5cGUpIHtcbiAgICAgICAgICAvLyBSZXBzb25zZSBpcyBKU09OXG4gICAgICAgICAgcmVzcG9uc2UuanNvbigpLnRoZW4oY29udGVudCA9PiB7XG4gICAgICAgICAgICBjb250ZW50ID0gdGhpcy5vcHRpb25zLmxvYWRTZWxlY3RvciA/IGNvbnRlbnRbdGhpcy5vcHRpb25zLmxvYWRTZWxlY3Rvcl0gOiBjb250ZW50WzBdO1xuICBcbiAgICAgICAgICAgIHRoaXMuY29udGVudFBvcGluLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGNvbnRlbnQpO1xuICAgICAgICAgICAgLy8gZXhlY3V0ZSBjYWxsYmFja1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQ2xhc3NpYyBIVE1MIHJlc3BvbnNlXG4gICAgICAgICAgcmVzcG9uc2UudGV4dCgpLnRoZW4oY29udGVudCA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmxvYWRTZWxlY3Rvcikge1xuICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICAgICAgICAgICAgY29udGVudCA9IGRpdi5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5sb2FkU2VsZWN0b3IpLm91dGVySFRNTFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb250ZW50UG9waW4uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgY29udGVudCk7XG4gICAgICAgICAgICAvLyBleGVjdXRlIGNhbGxiYWNrXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIHRoaXMuY29udGVudFBvcGluLmlubmVySFRNTCA9IHRoaXMub3B0aW9ucy5sb2FkRXJyb3I7XG4gICAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcGluIGZyb20gJy4uL3NyYy9wb3BpbidcblxuY29uc29sZS5sb2coJ3NxZHNkcycpXG5kb2N1bWVudFxuLnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1wb3BpbicpXG4uZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICBlbGVtZW50LnBvcGluID0gbmV3IFBvcGluKGVsZW1lbnQsIHtcbiAgICBsb2FkOiAnL2xvZ2luJyxcbiAgICBsb2FkU2VsZWN0b3I6ICcjbG9naW4tZm9ybScsXG4gICAgY2FsbGJhY2s6IHRoaXMubG9naW5DYWxsYmFjayxcbiAgICB9KVxufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==